{% extends "base.html" %}


{% block content %}
<div class="container">
  <div class="m-4">
    {# display just the playlists #}
    {% if results|length > 1 %}
    <table class="table table-striped table-bordered table-hover table-sm">
      <caption>Customers</caption>
      <thead>
        <tr>
          <th>Customer Name</th>
          <th class="text-center">Email</th>
          <th class="text-center">Total Value Of Orders</th>
        </tr>
      </thead>
      <tbody>
        {% for customer, invoice_total in results %}
        <tr>
          <td>
            <a href="{{url_for('customers_bp.customers', customer_id=customer.customer_id)}}">
              {{ customer.first_name }}&nbsp;{{customer.last_name}}
            </a>
          </td>
          <td class="text-center">{{ customer.email }}</td>
          <td class="text-right">{{ invoice_total }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {# display the playlist name and the tracks #}
    {% else %}
    {% set playlist = playlists[0] %}
    {% set tracks = playlist.tracks %}
    <div class="card" style="width: 18rem;">
      <div class="card-header">Playlist Tracks</div>
      <div class="card-body">
        <p class="card-text">Playlist Name:&nbsp;{{ playlist.name }}</p>
      </div>
    </div>
    <table class="table table-striped table-bordered table-hover table-sm">
      <caption>Playlist Tracks</caption>
      <thead>
        <tr>
          <th>Track Name</th>
          <th class="text-center">Media Type</th>
          <th class="text-center">Genre</th>
          <th class="text-center">Unit Price</th>
        </tr>
      </thead>
      <tbody>
        {% for track in tracks %}
        <tr>
          <td>{{ track.name }}</td>
          <td class="text-center">{{ track.media_type.name }}</td>
          <td class="text-center">{{ track.genre.name }}</td>
          <td class="text-right">{{ track.unit_price }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </div>
</div>
{% endblock %}

